<!doctype html>
<html is="dmx-app">

<head>
	<meta name="ac:route" content="/admin">
	<base href="/">
	<script src="dmxAppConnect/dmxAppConnect.js"></script>
	<meta charset="UTF-8">
	<title>Admin</title>
	<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous" />
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<link rel="stylesheet" href="bootstrap/4/css/bootstrap.min.css" />
	<script src="dmxAppConnect/dmxBootstrap4Navigation/dmxBootstrap4Navigation.js" defer=""></script>
	<script src="dmxAppConnect/dmxStateManagement/dmxStateManagement.js" defer=""></script>
	<script src="dmxAppConnect/dmxBrowser/dmxBrowser.js" defer=""></script>
	<script src="dmxAppConnect/dmxFormatter/dmxFormatter.js" defer=""></script>
	<script src="dmxAppConnect/dmxBootstrap4Alert/dmxBootstrap4Alert.js" defer=""></script>
	<script src="dmxAppConnect/dmxBootstrap4Modal/dmxBootstrap4Modal.js" defer=""></script>
</head>

<body id="admin">
	<dmx-serverconnect id="add_moderator" url="api/Manager/add_new_moderator" noload dmx-on:success="moderator_added.show()" dmx-on:error="moderator_error.show()"></dmx-serverconnect>


	<div is="dmx-browser" id="redirect"></div>
	<script is="dmx-flow" id="flow" type="text/dmx-flow">{
  condition: {
    if: "{{ok.value.inRange(0, 10000)}}",
    then: {
      steps: {
        run: {name: "k"}
      }
    },
    else: {
      steps: {
        run: {action: "{{redirect.goto('http://localhost:8100/')}}", name: "red"}
      }
    }
  }
}</script>
	<dmx-value id="ok" dmx-bind:value="-1"></dmx-value>
	<dmx-session-manager id="session"></dmx-session-manager>
	<dmx-serverconnect id="restrict_access" url="api/Data/restrict" dmx-param:id="session.data.user_id" dmx-on:success="ok.setValue(restrict_access.data.query[0].user_id);flow.run()"></dmx-serverconnect>



	<div class="container">
		<div class="row">
			<div class="col text-center mt-3">
				<h1 class="font-weight-light">Database manager</h1>
			</div>
		</div>

	</div>
	<div class="row mt-3 pl-5">
		<div class="col text-left border-bottom ml-0">
			<h3 class="font-weight-light">Actions</h3>
		</div>
	</div>
	<div class="row mt-2 ml-4">

		<div class="col-auto col-5">

			<button id="add_mod" class="btn btn-outline-primary" dmx-on:click="run({condition:{if:`show.value==0`,then:{steps:{run:{action:`show.setValue(1)`,name:'sw_1'}}},else:{steps:{run:{action:`show.setValue(0)`,name:'sw_0'}}}}})">Add New
				Moderator</button>
			<div class="row mt-2 ml-0" id="input_0" dmx-show="show.value==1">
				<dmx-value id="show" dmx-bind:value="0"></dmx-value>
				<div class="col ml-n3"><input id="text" name="text1" type="text" class="form-control" placeholder="E-mail"></div>


				<button id="sub" class="btn btn-outline-success" dmx-on:click="add_moderator.load({email: text.value})">Submit</button>
			</div>
		</div>
	</div>
	<div class="row mt-2 ml-4">

		<div class="col-auto col-5">

			<button id="add_mod1" class="btn btn-outline-primary" dmx-on:click="run({condition:{if:`show.value==0`,then:{steps:{run:{action:`show.setValue(1)`,name:'sw_1'}}},else:{steps:{run:{action:`show.setValue(0)`,name:'sw_0'}}}}})">Add New
				Moderator</button>
			<div class="row mt-2 ml-0" id="input_1" dmx-show="show.value==1">
				<dmx-value id="show1" dmx-bind:value="0"></dmx-value>
				<div class="col ml-n3"><input id="text1" name="text2" type="text" class="form-control" placeholder="E-mail"></div>


				<button id="btn2" class="btn btn-outline-success">Submit</button>
			</div>
		</div>
	</div>
	<div class="container wappler-block pt-3 pb-3">
		<div class="modal" id="moderator_added" is="dmx-bs4-modal" tabindex="-1" role="dialog">
			<div class="modal-dialog" role="document">
				<div class="modal-content">
					<div class="modal-body">
						<p class="text-center text-success"><i class="fa fa-check"></i></p>
						<h4 class="text-center font-weight-light">Success!</h4>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
					</div>
				</div>
			</div>
		</div>
	</div>
	<div class="container wappler-block pt-3 pb-3">
		<div class="modal" id="moderator_error" is="dmx-bs4-modal" tabindex="-1" role="dialog">
			<div class="modal-dialog" role="document">
				<div class="modal-content">
					<div class="modal-body">
						<p class="text-center text-danger"><i class="fa fa-times"></i></p>
						<h4 class="text-center font-weight-light">Error!</h4>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
					</div>
				</div>
			</div>
		</div>
	</div>
	<script src="bootstrap/4/js/popper.min.js"></script>
	<script src="bootstrap/4/js/bootstrap.min.js"></script>
</body>

</html>